<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>MementoAI</title>
    <link
      rel="icon"
      href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>ðŸ§ </text></svg>"
    />

    <!-- PWA Manifest -->
    <link rel="manifest" href="manifest.json" />

    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Newsreader:ital,wght@0,400;0,500;0,700;0,800;1,400;1,500;1,700;1,800&display=swap"
      rel="stylesheet"
    />
    <link
      href="https://fonts.googleapis.com/css2?family=Noto+Sans:ital,wght@0,400;0,500;0,700;0,900;1,400;1,500;1,700;1,900&display=swap"
      rel="stylesheet"
    />

    <!-- External Libraries -->
    <script src="libs/marked.min.js"></script>
    <script src="libs/highlight.min.js"></script>
    <link rel="stylesheet" href="libs/highlight.min.css" />

    <!-- CSS Files -->
    <link rel="stylesheet" href="css/variables.css" />
    <link rel="stylesheet" href="css/layout.css" />
    <link rel="stylesheet" href="css/forms.css" />
    <link rel="stylesheet" href="css/messages.css" />
    <link rel="stylesheet" href="css/markdown.css" />
  </head>
  <body>
    <div class="container">
      <div class="header">
        <h2 class="header-title">Chat</h2>
        <button
          id="settings-toggle"
          class="settings-button"
          aria-haspopup="dialog"
          aria-controls="settings-modal"
          aria-label="Settings"
        >
          <svg
            xmlns="http://www.w3.org/2000/svg"
            width="24"
            height="24"
            fill="currentColor"
            viewBox="0 0 256 256"
          >
            <path
              d="M128,80a48,48,0,1,0,48,48A48.05,48.05,0,0,0,128,80Zm0,80a32,32,0,1,1,32-32A32,32,0,0,1,128,160Zm88-29.84q.06-2.16,0-4.32l14.92-18.64a8,8,0,0,0,1.48-7.06,107.21,107.21,0,0,0-10.88-26.25,8,8,0,0,0-6-3.93l-23.72-2.64q-1.48-1.56-3-3L186,40.54a8,8,0,0,0-3.94-6,107.71,107.71,0,0,0-26.25-10.87,8,8,0,0,0-7.06,1.49L130.16,40Q128,40,125.84,40L107.2,25.11a8,8,0,0,0-7.06-1.48A107.6,107.6,0,0,0,73.89,34.51a8,8,0,0,0-3.93,6L67.32,64.27q-1.56,1.49-3,3L40.54,70a8,8,0,0,0-6,3.94,107.71,107.71,0,0,0-10.87,26.25,8,8,0,0,0,1.49,7.06L40,125.84Q40,128,40,130.16L25.11,148.8a8,8,0,0,0-1.48,7.06,107.21,107.21,0,0,0,10.88,26.25,8,8,0,0,0,6,3.93l23.72,2.64q1.49,1.56,3,3L70,215.46a8,8,0,0,0,3.94,6,107.71,107.71,0,0,0,26.25,10.87,8,8,0,0,0,7.06-1.49L125.84,216q2.16.06,4.32,0l18.64,14.92a8,8,0,0,0,7.06,1.48,107.21,107.21,0,0,0,26.25-10.88,8,8,0,0,0,3.93-6l2.64-23.72q1.56-1.48,3-3L215.46,186a8,8,0,0,0,6-3.94,107.71,107.71,0,0,0,10.87-26.25,8,8,0,0,0-1.49-7.06Zm-16.1-6.5a73.93,73.93,0,0,1,0,8.68,8,8,0,0,0,1.74,5.48l14.19,17.73a91.57,91.57,0,0,1-6.23,15L187,173.11a8,8,0,0,0-5.1,2.64,74.11,74.11,0,0,1-6.14,6.14,8,8,0,0,0-2.64,5.1l-2.51,22.58a91.32,91.32,0,0,1-15,6.23l-17.74-14.19a8,8,0,0,0-5-1.75h-.48a73.93,73.93,0,0,1-8.68,0,8,8,0,0,0-5.48,1.74L100.45,215.8a91.57,91.57,0,0,1-15-6.23L82.89,187a8,8,0,0,0-2.64-5.1,74.11,74.11,0,0,1-6.14-6.14A8,8,0,0,0,71.47,173.11L69,150.53a91.32,91.32,0,0,1-6.23-15l14.19-17.74a8,8,0,0,0,1.74-5.48,73.93,73.93,0,0,1,0-8.68,8,8,0,0,0-1.74-5.48L62.77,100.45a91.57,91.57,0,0,1,6.23-15L82.89,69a8,8,0,0,0,2.64-5.1,74.11,74.11,0,0,1,6.14-6.14A8,8,0,0,0,94.31,55.11L96.82,32.53a91.32,91.32,0,0,1,15-6.23l17.74,14.19a8,8,0,0,0,5.48,1.74,73.93,73.93,0,0,1,8.68,0,8,8,0,0,0,5.48-1.74L155.55,26.3a91.57,91.57,0,0,1,15,6.23L173.11,55.11a8,8,0,0,0,2.64,5.1,74.11,74.11,0,0,1,6.14,6.14,8,8,0,0,0,5.1,2.64l22.58,2.51a91.32,91.32,0,0,1,6.23,15l-14.19,17.74A8,8,0,0,0,199.87,123.66Z"
            ></path>
          </svg>
        </button>
      </div>

      <main
        id="chat-container"
        class="chat-container"
        aria-live="polite"
        aria-busy="false"
      ></main>

      <div class="input-container">
        <div class="input-wrapper">
          <textarea
            id="message-input"
            class="message-input"
            placeholder="Type a message"
            aria-label="Type a message"
          ></textarea>
          <div class="input-actions">
            <button class="image-button" aria-label="Add image">
              <svg
                xmlns="http://www.w3.org/2000/svg"
                width="20"
                height="20"
                fill="currentColor"
                viewBox="0 0 256 256"
              >
                <path
                  d="M216,40H40A16,16,0,0,0,24,56V200a16,16,0,0,0,16,16H216a16,16,0,0,0,16-16V56A16,16,0,0,0,216,40Zm0,16V158.75l-26.07-26.06a16,16,0,0,0-22.63,0l-20,20-44-44a16,16,0,0,0-22.62,0L40,149.37V56ZM40,172l52-52,80,80H40Zm176,28H194.63l-36-36,20-20L216,181.38V200ZM144,100a12,12,0,1,1,12,12A12,12,0,0,1,144,100Z"
                ></path>
              </svg>
            </button>
            <button id="send-button" class="send-button" disabled>
              <span class="send-text">Send</span>
            </button>
          </div>
        </div>
      </div>

      <div class="bottom-navigation">
        <a class="nav-item active" href="#" aria-current="page">
          <div class="nav-icon">
            <svg
              xmlns="http://www.w3.org/2000/svg"
              width="24"
              height="24"
              fill="currentColor"
              viewBox="0 0 256 256"
            >
              <path
                d="M232,96a16,16,0,0,0-16-16H184V48a16,16,0,0,0-16-16H40A16,16,0,0,0,24,48V176a8,8,0,0,0,13,6.22L72,154V184a16,16,0,0,0,16,16h93.59L219,230.22a8,8,0,0,0,5,1.78,8,8,0,0,0,8-8Zm-42.55,89.78a8,8,0,0,0-5-1.78H88V152h80a16,16,0,0,0,16-16V96h32V207.25Z"
              ></path>
            </svg>
          </div>
          <p class="nav-label">Chat</p>
        </a>
        <a class="nav-item" href="#">
          <div class="nav-icon">
            <svg
              xmlns="http://www.w3.org/2000/svg"
              width="24"
              height="24"
              fill="currentColor"
              viewBox="0 0 256 256"
            >
              <path
                d="M208,32H184V24a8,8,0,0,0-16,0v8H88V24a8,8,0,0,0-16,0v8H48A16,16,0,0,0,32,48V208a16,16,0,0,0,16,16H208a16,16,0,0,0,16-16V48A16,16,0,0,0,208,32ZM72,48v8a8,8,0,0,0,16,0V48h80v8a8,8,0,0,0,16,0V48h24V80H48V48ZM208,208H48V96H208V208Zm-96-88v64a8,8,0,0,1-16,0V132.94l-4.42,2.22a8,8,0,0,1-7.16-14.32l16-8A8,8,0,0,1,112,120Zm59.16,30.45L152,176h16a8,8,0,0,1,0,16H136a8,8,0,0,1-6.4-12.8l28.78-38.37A8,8,0,1,0,145.07,132a8,8,0,1,1-13.85-8A24,24,0,0,1,176,136,23.76,23.76,0,0,1,171.16,150.45Z"
              ></path>
            </svg>
          </div>
          <p class="nav-label">Planner</p>
        </a>
        <a class="nav-item" href="#">
          <div class="nav-icon">
            <svg
              xmlns="http://www.w3.org/2000/svg"
              width="24"
              height="24"
              fill="currentColor"
              viewBox="0 0 256 256"
            >
              <path
                d="M230.92,212c-15.23-26.33-38.7-45.21-66.09-54.16a72,72,0,1,0-73.66,0C63.78,166.78,40.31,185.66,25.08,212a8,8,0,1,0,13.85,8c18.84-32.56,52.14-52,89.07-52s70.23,19.44,89.07,52a8,8,0,1,0,13.85-8ZM72,96a56,56,0,1,1,56,56A56.06,56.06,0,0,1,72,96Z"
              ></path>
            </svg>
          </div>
          <p class="nav-label">Profile</p>
        </a>
      </div>
      <div class="bottom-spacing"></div>
    </div>

    <!-- Settings Modal -->
    <div
      id="settings-modal"
      class="modal"
      aria-hidden="true"
      role="dialog"
      aria-labelledby="modal-title"
    >
      <div class="modal-overlay" id="modal-overlay"></div>
      <div class="modal-content">
        <div class="modal-header">
          <h2 id="modal-title">Settings</h2>
          <button id="modal-close" class="modal-close" aria-label="Close">
            Ã—
          </button>
        </div>
        <div class="modal-body">
          <form id="settings-form">
            <div id="settings-panel">
              <div class="form-group">
                <label for="api-key">OpenRouter API Key</label>
                <input
                  type="password"
                  id="api-key"
                  placeholder="sk-or-..."
                /><small
                  >Your key is saved in your browser's local storage.</small
                >
              </div>
              <div class="form-group">
                <label for="model-select">Model</label>
                <select id="model-select"></select>
              </div>
              <div class="form-group">
                <label>
                  <input type="checkbox" id="free-filter" checked /> Show only
                  free models
                </label>
              </div>
              <div class="form-group">
                <label for="model-search">Filter models by name</label>
                <input
                  type="text"
                  id="model-search"
                  placeholder="Search model names..."
                />
              </div>
              <div class="form-group">
                <label for="system-prompt">System Prompt</label
                ><textarea id="system-prompt" rows="12"></textarea>
              </div>
              <div class="button-group">
                <button type="button" id="save-settings">Save Settings</button>
                <button type="button" id="refresh-models">
                  Refresh Models
                </button>
                <button type="button" id="export-memory">Export Memory</button>
                <button type="button" id="import-memory">Import Memory</button>
                <button type="button" id="enable-notifications">
                  Enable Notifications
                </button>
                <button type="button" id="clear-debug">Clear Debug</button>
                <input
                  type="file"
                  id="import-file-input"
                  accept=".json"
                  style="display: none"
                />
              </div>
              <div id="debug-info"></div>
              <button type="button" id="close-settings">Close</button>
            </div>
          </form>
        </div>
      </div>
    </div>

    <!-- JavaScript Files -->
    <script type="module" src="js/state.js"></script>
    <script type="module" src="js/api.js"></script>
    <script type="module" src="js/ui.js"></script>
    <script type="module" src="js/memory.js"></script>
    <script type="module" src="js/notifications.js"></script>
    <script type="module" src="js/pwa.js"></script>
    <script type="module" src="js/main.js"></script>
  </body>
</html>
