<html>
  <head>
    <link rel="preconnect" href="https://fonts.gstatic.com/" crossorigin="" />
    <link
      rel="stylesheet"
      as="style"
      onload="this.rel='stylesheet'"
      href="https://fonts.googleapis.com/css2?display=swap&family=Newsreader%3Awght%40400%3B500%3B700%3B800&family=Noto+Sans%3Awght%40400%3B500%3B700%3B900"
    />

    <title>Stitch Design</title>
    <link rel="icon" type="image/x-icon" href="data:image/x-icon;base64," />

    <script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>
    <!-- PWA Manifest -->
    <link rel="manifest" href="manifest.json" />

    <!-- External Libraries -->
    <script src="libs/marked.min.js"></script>
    <script src="libs/highlight.min.js"></script>
    <link rel="stylesheet" href="libs/highlight.min.css" />

    <!-- CSS Files -->
    <!-- <link rel="stylesheet" href="css/variables.css">
    <link rel="stylesheet" href="css/layout.css">
    <link rel="stylesheet" href="css/forms.css">
    <link rel="stylesheet" href="css/messages.css">
    <link rel="stylesheet" href="css/markdown.css"> -->
  </head>
  <body>
    <div
      class="relative flex size-full min-h-screen flex-col bg-[#15191e] dark justify-between group/design-root overflow-x-hidden"
      style="font-family: Newsreader, 'Noto Sans', sans-serif"
    >
      <div>
        <div class="flex items-center bg-[#15191e] p-4 pb-2 justify-between">
          <h2
            class="text-white text-lg font-bold leading-tight tracking-[-0.015em] flex-1 text-center pl-12"
          >
            Chat
          </h2>
          <div class="flex w-12 items-center justify-end">
            <button
              id="settings-toggle"
              class="flex max-w-[480px] cursor-pointer items-center justify-center overflow-hidden rounded h-12 bg-transparent text-white gap-2 text-base font-bold leading-normal tracking-[0.015em] min-w-0 p-0"
            >
              <div
                class="text-white"
                data-icon="Gear"
                data-size="24px"
                data-weight="regular"
              >
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  width="24px"
                  height="24px"
                  fill="currentColor"
                  viewBox="0 0 256 256"
                >
                  <path
                    d="M128,80a48,48,0,1,0,48,48A48.05,48.05,0,0,0,128,80Zm0,80a32,32,0,1,1,32-32A32,32,0,0,1,128,160Zm88-29.84q.06-2.16,0-4.32l14.92-18.64a8,8,0,0,0,1.48-7.06,107.21,107.21,0,0,0-10.88-26.25,8,8,0,0,0-6-3.93l-23.72-2.64q-1.48-1.56-3-3L186,40.54a8,8,0,0,0-3.94-6,107.71,107.71,0,0,0-26.25-10.87,8,8,0,0,0-7.06,1.49L130.16,40Q128,40,125.84,40L107.2,25.11a8,8,0,0,0-7.06-1.48A107.6,107.6,0,0,0,73.89,34.51a8,8,0,0,0-3.93,6L67.32,64.27q-1.56,1.49-3,3L40.54,70a8,8,0,0,0-6,3.94,107.71,107.71,0,0,0-10.87,26.25,8,8,0,0,0,1.49,7.06L40,125.84Q40,128,40,130.16L25.11,148.8a8,8,0,0,0-1.48,7.06,107.21,107.21,0,0,0,10.88,26.25,8,8,0,0,0,6,3.93l23.72,2.64q1.49,1.56,3,3L70,215.46a8,8,0,0,0,3.94,6,107.71,107.71,0,0,0,26.25,10.87,8,8,0,0,0,7.06-1.49L125.84,216q2.16.06,4.32,0l18.64,14.92a8,8,0,0,0,7.06,1.48,107.21,107.21,0,0,0,26.25-10.88,8,8,0,0,0,3.93-6l2.64-23.72q1.56-1.48,3-3L215.46,186a8,8,0,0,0,6-3.94,107.71,107.71,0,0,0,10.87-26.25,8,8,0,0,0-1.49-7.06Zm-16.1-6.5a73.93,73.93,0,0,1,0,8.68,8,8,0,0,0,1.74,5.48l14.19,17.73a91.57,91.57,0,0,1-6.23,15L187,173.11a8,8,0,0,0-5.1,2.64,74.11,74.11,0,0,1-6.14,6.14,8,8,0,0,0-2.64,5.1l-2.51,22.58a91.32,91.32,0,0,1-15,6.23l-17.74-14.19a8,8,0,0,0-5-1.75h-.48a73.93,73.93,0,0,1-8.68,0,8,8,0,0,0-5.48,1.74L100.45,215.8a91.57,91.57,0,0,1-15-6.23L82.89,187a8,8,0,0,0-2.64-5.1,74.11,74.11,0,0,1-6.14-6.14,8,8,0,0,0-5.1-2.64L46.43,170.6a91.32,91.32,0,0,1-6.23-15l14.19-17.74a8,8,0,0,0,1.74-5.48,73.93,73.93,0,0,1,0-8.68,8,8,0,0,0-1.74-5.48L40.2,100.45a91.57,91.57,0,0,1,6.23-15L69,82.89a8,8,0,0,0,5.1-2.64,74.11,74.11,0,0,1,6.14-6.14A8,8,0,0,0,82.89,69L85.4,46.43a91.32,91.32,0,0,1,15-6.23l17.74,14.19a8,8,0,0,0,5.48,1.74,73.93,73.93,0,0,1,8.68,0,8,8,0,0,0,5.48-1.74L155.55,40.2a91.57,91.57,0,0,1,15,6.23L173.11,69a8,8,0,0,0,2.64,5.1,74.11,74.11,0,0,1,6.14,6.14,8,8,0,0,0,5.1,2.64l22.58,2.51a91.32,91.32,0,0,1,6.23,15l-14.19,17.74A8,8,0,0,0,199.87,123.66Z"
                  ></path>
                </svg>
              </div>
            </button>
          </div>
        </div>
      <!-- Settings Modal -->
      <div id="settings-modal" class="fixed inset-0 z-50 hidden">
        <div class="absolute inset-0 bg-black bg-opacity-50"></div>
        <div class="absolute inset-0 flex items-center justify-center p-4">
          <div class="relative w-full max-w-md max-h-[90vh] overflow-y-auto rounded-lg bg-[#15191e] border border-[#3f4a5a] shadow-lg">
            <div class="flex items-center justify-between p-4 border-b border-[#3f4a5a]">
              <h2 class="text-white text-lg font-bold" id="modal-title">Settings</h2>
              <button id="modal-close" class="text-[#a0abbb] hover:text-white focus:outline-none focus:ring-2 focus:ring-blue-500 rounded-full p-1" aria-label="Close">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
                </svg>
              </button>
            </div>
            <div class="p-4">
              <form id="settings-form">
                <div class="space-y-4">
                  <div class="pt-2">
                    <h3 class="text-md font-semibold text-white mb-3">API Settings</h3>
                    <div>
                      <label for="api-key" class="block text-sm font-medium text-white mb-1">OpenRouter API Key</label>
                      <input type="password" id="api-key" class="w-full px-3 py-2 bg-[#2c343f] text-white rounded border border-[#3f4a5a] focus:outline-none focus:ring-1 focus:ring-blue-500" placeholder="sk-or-..." />
                      <p class="mt-1 text-xs text-[#a0abbb]">Your key is saved in your browser's local storage.</p>
                    </div>
                  </div>
                  
                  <div class="pt-2">
                    <h3 class="text-md font-semibold text-white mb-3">Model Settings</h3>
                    <div>
                      <label for="model-select" class="block text-sm font-medium text-white mb-1">Model</label>
                      <select id="model-select" class="w-full px-3 py-2 bg-[#2c343f] text-white rounded border border-[#3f4a5a] focus:outline-none focus:ring-1 focus:ring-blue-500">
                        <!-- Options will be populated by JavaScript -->
                      </select>
                    </div>
                    
                    <div class="flex items-center mt-3">
                      <input type="checkbox" id="free-filter" class="h-4 w-4 text-blue-600 bg-[#2c343f] border-[#3f4a5a] rounded focus:ring-blue-500" checked />
                      <label for="free-filter" class="ml-2 block text-sm text-white">Show only free models</label>
                    </div>
                    
                    <div class="mt-3">
                      <label for="model-search" class="block text-sm font-medium text-white mb-1">Filter models by name</label>
                      <input type="text" id="model-search" class="w-full px-3 py-2 bg-[#2c343f] text-white rounded border border-[#3f4a5a] focus:outline-none focus:ring-1 focus:ring-blue-500" placeholder="Search model names..." />
                    </div>
                  </div>
                  
                  <div class="pt-2">
                    <h3 class="text-md font-semibold text-white mb-3">System Prompt</h3>
                    <div>
                      <label for="system-prompt" class="block text-sm font-medium text-white mb-1">System Prompt</label>
                      <textarea id="system-prompt" rows="4" class="w-full px-3 py-2 bg-[#2c343f] text-white rounded border border-[#3f4a5a] focus:outline-none focus:ring-1 focus:ring-blue-500"></textarea>
                    </div>
                  </div>
                  
                  <div class="pt-2">
                    <h3 class="text-md font-semibold text-white mb-3">Memory Management</h3>
                    <div class="grid grid-cols-2 gap-2">
                      <button type="button" id="save-settings" class="px-4 py-2 bg-[#172538] text-white rounded hover:bg-[#1a2a40] focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 focus:ring-offset-[#15191e]">Save Settings</button>
                      <button type="button" id="refresh-models" class="px-4 py-2 bg-[#172538] text-white rounded hover:bg-[#1a2a40] focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 focus:ring-offset-[#15191e]">Refresh Models</button>
                      <button type="button" id="export-memory" class="px-4 py-2 bg-[#172538] text-white rounded hover:bg-[#1a2a40] focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 focus:ring-offset-[#15191e]">Export Memory</button>
                      <button type="button" id="import-memory" class="px-4 py-2 bg-[#172538] text-white rounded hover:bg-[#1a2a40] focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 focus:ring-offset-[#15191e]">Import Memory</button>
                      <button type="button" id="enable-notifications" class="px-4 py-2 bg-[#172538] text-white rounded hover:bg-[#1a2a40] focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 focus:ring-offset-[#15191e]">Enable Notifications</button>
                      <button type="button" id="clear-debug" class="px-4 py-2 bg-[#172538] text-white rounded hover:bg-[#1a2a40] focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 focus:ring-offset-[#15191e]">Clear Debug</button>
                    </div>
                  </div>
                  
                  <input type="file" id="import-file-input" accept=".json" class="hidden" />
                  
                  <div id="debug-info" class="text-sm text-[#a0abbb]"></div>
                  
                  <div class="flex justify-end">
                    <button type="button" id="close-settings" class="px-4 py-2 bg-[#172538] text-white rounded hover:bg-[#1a2a40] focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 focus:ring-offset-[#15191e]">Close</button>
                  </div>
                </div>
              </form>
            </div>
          </div>
        </div>
      </div>
      </div>
      <!-- Messages container -->
      <div id="chat-container"></div>
      <div id="input-container">
        <div class="flex items-center px-4 py-3 gap-3 @container">
          <label class="flex flex-col min-w-40 h-12 flex-1">
            <div class="flex w-full flex-1 items-stretch rounded h-full">
              <input
                id="message-input"
                placeholder="Type a message"
                class="form-input flex w-full min-w-0 flex-1 resize-none overflow-hidden rounded text-white focus:outline-0 focus:ring-0 border-none bg-[#2c343f] focus:border-none h-full placeholder:text-[#a0abbb] px-4 rounded-r-none border-r-0 pr-2 text-base font-normal leading-normal"
                value=""
              />
              <div
                class="flex border-none bg-[#2c343f] items-center justify-center pr-4 rounded-r border-l-0 !pr-2"
              >
                <div class="flex items-center gap-4 justify-end">
                  <div class="flex items-center gap-1">
                    <button class="flex items-center justify-center p-1.5">
                      <div
                        class="text-[#a0abbb]"
                        data-icon="Image"
                        data-size="20px"
                        data-weight="regular"
                      >
                        <svg
                          xmlns="http://www.w3.org/2000/svg"
                          width="20px"
                          height="20px"
                          fill="currentColor"
                          viewBox="0 0 256 256"
                        >
                          <path
                            d="M216,40H40A16,16,0,0,0,24,56V200a16,16,0,0,0,16,16H216a16,16,0,0,0,16-16V56A16,16,0,0,0,216,40Zm0,16V158.75l-26.07-26.06a16,16,0,0,0-22.63,0l-20,20-44-44a16,16,0,0,0-22.62,0L40,149.37V56ZM40,172l52-52,80,80H40Zm176,28H194.63l-36-36,20-20L216,181.38V200ZM144,100a12,12,0,1,1,12,12A12,12,0,0,1,144,100Z"
                          ></path>
                        </svg>
                      </div>
                    </button>
                  </div>
                  <button
                    id="send-button"
                    class="min-w-[84px] max-w-[480px] cursor-pointer items-center justify-center overflow-hidden rounded h-8 px-4 bg-[#172538] text-white text-sm font-medium leading-normal hidden @[480px]:block"
                  >
                    <span class="truncate">Send</span>
                  </button>
                </div>
              </div>
            </div>
          </label>
        </div>
        <div
          class="flex gap-2 border-t border-[#2c343f] bg-[#20252d] px-4 pb-3 pt-2"
        >
          <a
            class="just flex flex-1 flex-col items-center justify-end gap-1 rounded-full text-white"
            href="#"
          >
            <div
              class="text-white flex h-8 items-center justify-center"
              data-icon="Chats"
              data-size="24px"
              data-weight="fill"
            >
              <svg
                xmlns="http://www.w3.org/2000/svg"
                width="24px"
                height="24px"
                fill="currentColor"
                viewBox="0 0 256 256"
              >
                <path
                  d="M232,96a16,16,0,0,0-16-16H184V48a16,16,0,0,0-16-16H40A16,16,0,0,0,24,48V176a8,8,0,0,0,13,6.22L72,154V184a16,16,0,0,0,16,16h93.59L219,230.22a8,8,0,0,0,5,1.78,8,8,0,0,0,8-8Zm-42.55,89.78a8,8,0,0,0-5-1.78H88V152h80a16,16,0,0,0,16-16V96h32V207.25Z"
                ></path>
              </svg>
            </div>
            <p
              class="text-white text-xs font-medium leading-normal tracking-[0.015em]"
            >
              Chat
            </p>
          </a>
          <a
            class="just flex flex-1 flex-col items-center justify-end gap-1 text-[#a0abbb]"
            href="#"
          >
            <div
              class="text-[#a0abbb] flex h-8 items-center justify-center"
              data-icon="Calendar"
              data-size="24px"
              data-weight="regular"
            >
              <svg
                xmlns="http://www.w3.org/2000/svg"
                width="24px"
                height="24px"
                fill="currentColor"
                viewBox="0 0 256 256"
              >
                <path
                  d="M208,32H184V24a8,8,0,0,0-16,0v8H88V24a8,8,0,0,0-16,0v8H48A16,16,0,0,0,32,48V208a16,16,0,0,0,16,16H208a16,16,0,0,0,16-16V48A16,16,0,0,0,208,32ZM72,48v8a8,8,0,0,0,16,0V48h80v8a8,8,0,0,0,16,0V48h24V80H48V48ZM208,208H48V96H208V208Zm-96-88v64a8,8,0,0,1-16,0V132.94l-4.42,2.22a8,8,0,0,1-7.16-14.32l16-8A8,8,0,0,1,112,120Zm59.16,30.45L152,176h16a8,8,0,0,1,0,16H136a8,8,0,0,1-6.4-12.8l28.78-38.37A8,8,0,1,0,145.07,132a8,8,0,1,1-13.85-8A24,24,0,0,1,176,136,23.76,23.76,0,0,1,171.16,150.45Z"
                ></path>
              </svg>
            </div>
            <p
              class="text-[#a0abbb] text-xs font-medium leading-normal tracking-[0.015em]"
            >
              Planner
            </p>
          </a>
          <a
            class="just flex flex-1 flex-col items-center justify-end gap-1 text-[#a0abbb]"
            href="#"
          >
            <div
              class="text-[#a0abbb] flex h-8 items-center justify-center"
              data-icon="User"
              data-size="24px"
              data-weight="regular"
            >
              <svg
                xmlns="http://www.w3.org/2000/svg"
                width="24px"
                height="24px"
                fill="currentColor"
                viewBox="0 0 256 256"
              >
                <path
                  d="M230.92,212c-15.23-26.33-38.7-45.21-66.09-54.16a72,72,0,1,0-73.66,0C63.78,166.78,40.31,185.66,25.08,212a8,8,0,1,0,13.85,8c18.84-32.56,52.14-52,89.07-52s70.23,19.44,89.07,52a8,8,0,1,0,13.85-8ZM72,96a56,56,0,1,1,56,56A56.06,56.06,0,0,1,72,96Z"
                ></path>
              </svg>
            </div>
            <p
              class="text-[#a0abbb] text-xs font-medium leading-normal tracking-[0.015em]"
            >
              Profile
            </p>
          </a>
        </div>
        <div class="h-5 bg-[#20252d]"></div>
      </div>
    </div>
    <!-- JavaScript Files -->
    <script type="module" src="js/state.js"></script>
    <script type="module" src="js/api.js"></script>
    <script type="module" src="js/ui.js"></script>
    <script type="module" src="js/memory.js"></script>
    <script type="module" src="js/notifications.js"></script>
    <script type="module" src="js/pwa.js"></script>
    <script type="module" src="js/main.js"></script>
  </body>
</html>
